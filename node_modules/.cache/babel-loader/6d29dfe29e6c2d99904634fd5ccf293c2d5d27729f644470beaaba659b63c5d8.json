{"ast":null,"code":"import _defineProperty from \"/home/cg/public/h1emu-boot-vue/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport PropTypes from 'ant-design-vue/es/_util/vue-types';\nimport Option from './TagSelectOption.jsx';\nimport { filterEmpty } from '@/components/_util/util';\nexport default {\n  Option: Option,\n  name: 'TagSelect',\n  model: {\n    prop: 'checked',\n    event: 'change'\n  },\n  props: {\n    prefixCls: {\n      type: String,\n      default: 'ant-pro-tag-select'\n    },\n    defaultValue: {\n      type: PropTypes.array,\n      default: null\n    },\n    value: {\n      type: PropTypes.array,\n      default: null\n    },\n    expandable: {\n      type: Boolean,\n      default: false\n    },\n    hideCheckAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      expand: false,\n      localCheckAll: false,\n      items: this.getItemsKey(filterEmpty(this.$slots.default)),\n      val: this.value || this.defaultValue || []\n    };\n  },\n  methods: {\n    onChange: function onChange(checked) {\n      var key = Object.keys(this.items).filter(function (key) {\n        return key === checked.value;\n      });\n      this.items[key] = checked.checked;\n      var bool = Object.values(this.items).lastIndexOf(false);\n      if (bool === -1) {\n        this.localCheckAll = true;\n      } else {\n        this.localCheckAll = false;\n      }\n    },\n    onCheckAll: function onCheckAll(checked) {\n      var _this = this;\n      Object.keys(this.items).forEach(function (v) {\n        _this.items[v] = checked.checked;\n      });\n      this.localCheckAll = checked.checked;\n    },\n    getItemsKey: function getItemsKey(items) {\n      var totalItem = {};\n      items.forEach(function (item) {\n        totalItem[item.componentOptions.propsData && item.componentOptions.propsData.value] = false;\n      });\n      return totalItem;\n    },\n    // CheckAll Button\n    renderCheckAll: function renderCheckAll() {\n      var _this2 = this;\n      var h = this.$createElement;\n      var props = {\n        on: {\n          change: function change(checked) {\n            _this2.onCheckAll(checked);\n            checked.value = 'total';\n            _this2.$emit('change', checked);\n          }\n        }\n      };\n      var checkAllElement = h(Option, _mergeJSXProps([{\n        \"key\": 'total',\n        \"attrs\": {\n          \"checked\": this.localCheckAll\n        }\n      }, props]), [\"All\"]);\n      return !this.hideCheckAll && checkAllElement || null;\n    },\n    // expandable\n    renderExpandable: function renderExpandable() {},\n    // render option\n    renderTags: function renderTags(items) {\n      var _this3 = this;\n      var listeners = {\n        change: function change(checked) {\n          _this3.onChange(checked);\n          _this3.$emit('change', checked);\n        }\n      };\n      return items.map(function (vnode) {\n        var options = vnode.componentOptions;\n        options.listeners = listeners;\n        return vnode;\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var prefixCls = this.$props.prefixCls;\n    var classString = _defineProperty({}, \"\".concat(prefixCls), true);\n    var tagItems = filterEmpty(this.$slots.default);\n    return h(\"div\", {\n      \"class\": classString\n    }, [this.renderCheckAll(), this.renderTags(tagItems)]);\n  }\n};","map":{"version":3,"names":["PropTypes","Option","filterEmpty","name","model","prop","event","props","prefixCls","type","String","default","defaultValue","array","value","expandable","Boolean","hideCheckAll","data","expand","localCheckAll","items","getItemsKey","$slots","val","methods","onChange","checked","key","Object","keys","filter","bool","values","lastIndexOf","onCheckAll","forEach","v","totalItem","item","componentOptions","propsData","renderCheckAll","on","change","$emit","checkAllElement","renderExpandable","renderTags","listeners","map","vnode","options","render","$props","classString","tagItems"],"sources":["/home/cg/public/h1emu-boot-vue/src/components/TagSelect/index.jsx"],"sourcesContent":["import PropTypes from 'ant-design-vue/es/_util/vue-types'\nimport Option from './TagSelectOption.jsx'\nimport { filterEmpty } from '@/components/_util/util'\n\nexport default {\n  Option,\n  name: 'TagSelect',\n  model: {\n    prop: 'checked',\n    event: 'change'\n  },\n  props: {\n    prefixCls: {\n      type: String,\n      default: 'ant-pro-tag-select'\n    },\n    defaultValue: {\n      type: PropTypes.array,\n      default: null\n    },\n    value: {\n      type: PropTypes.array,\n      default: null\n    },\n    expandable: {\n      type: Boolean,\n      default: false\n    },\n    hideCheckAll: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      expand: false,\n      localCheckAll: false,\n      items: this.getItemsKey(filterEmpty(this.$slots.default)),\n      val: this.value || this.defaultValue || []\n    }\n  },\n  methods: {\n    onChange (checked) {\n      const key = Object.keys(this.items).filter(key => key === checked.value)\n      this.items[key] = checked.checked\n      const bool = Object.values(this.items).lastIndexOf(false)\n      if (bool === -1) {\n        this.localCheckAll = true\n      } else {\n        this.localCheckAll = false\n      }\n    },\n    onCheckAll (checked) {\n      Object.keys(this.items).forEach(v => {\n        this.items[v] = checked.checked\n      })\n      this.localCheckAll = checked.checked\n    },\n    getItemsKey (items) {\n      const totalItem = {}\n      items.forEach(item => {\n        totalItem[item.componentOptions.propsData && item.componentOptions.propsData.value] = false\n      })\n      return totalItem\n    },\n    // CheckAll Button\n    renderCheckAll () {\n      const props = {\n        on: {\n          change: (checked) => {\n            this.onCheckAll(checked)\n            checked.value = 'total'\n            this.$emit('change', checked)\n          }\n        }\n      }\n      const checkAllElement = <Option key={'total'} checked={this.localCheckAll} {...props}>All</Option>\n      return !this.hideCheckAll && checkAllElement || null\n    },\n    // expandable\n    renderExpandable () {\n\n    },\n    // render option\n    renderTags (items) {\n      const listeners = {\n        change: (checked) => {\n          this.onChange(checked)\n          this.$emit('change', checked)\n        }\n      }\n\n      return items.map(vnode => {\n        const options = vnode.componentOptions\n        options.listeners = listeners\n        return vnode\n      })\n    }\n  },\n  render () {\n    const { $props: { prefixCls } } = this\n    const classString = {\n      [`${prefixCls}`]: true\n    }\n    const tagItems = filterEmpty(this.$slots.default)\n    return (\n      <div class={classString}>\n        {this.renderCheckAll()}\n        {this.renderTags(tagItems)}\n      </div>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}