{"ast":null,"code":"import _objectSpread from \"/home/cg/public/h1emu-boot-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Modal from 'ant-design-vue/es/modal';\nexport default (function (Vue) {\n  function dialog(component, componentProps, modalProps) {\n    var _vm = this;\n    modalProps = modalProps || {};\n    if (!_vm || !_vm._isVue) {\n      return;\n    }\n    var dialogDiv = document.querySelector('body>div[type=dialog]');\n    if (!dialogDiv) {\n      dialogDiv = document.createElement('div');\n      dialogDiv.setAttribute('type', 'dialog');\n      document.body.appendChild(dialogDiv);\n    }\n    var handle = function handle(checkFunction, afterHandel) {\n      if (checkFunction instanceof Function) {\n        var res = checkFunction();\n        if (res instanceof Promise) {\n          res.then(function (c) {\n            c && afterHandel();\n          });\n        } else {\n          res && afterHandel();\n        }\n      } else {\n        // checkFunction && afterHandel()\n        checkFunction || afterHandel();\n      }\n    };\n    var dialogInstance = new Vue({\n      data: function data() {\n        return {\n          visible: true\n        };\n      },\n      router: _vm.$router,\n      store: _vm.$store,\n      mounted: function mounted() {\n        var _this = this;\n        this.$on('close', function (v) {\n          _this.handleClose();\n        });\n      },\n      methods: {\n        handleClose: function handleClose() {\n          var _this2 = this;\n          handle(this.$refs._component.onCancel, function () {\n            _this2.visible = false;\n            _this2.$refs._component.$emit('close');\n            _this2.$refs._component.$emit('cancel');\n            dialogInstance.$destroy();\n          });\n        },\n        handleOk: function handleOk() {\n          var _this3 = this;\n          handle(this.$refs._component.onOK || this.$refs._component.onOk, function () {\n            _this3.visible = false;\n            _this3.$refs._component.$emit('close');\n            _this3.$refs._component.$emit('ok');\n            dialogInstance.$destroy();\n          });\n        }\n      },\n      render: function render(h) {\n        var that = this;\n        var modalModel = modalProps && modalProps.model;\n        if (modalModel) {\n          delete modalProps.model;\n        }\n        var ModalProps = Object.assign({}, modalModel && {\n          model: modalModel\n        } || {}, {\n          attrs: Object.assign({}, _objectSpread({}, modalProps.attrs || modalProps), {\n            visible: this.visible\n          }),\n          on: Object.assign({}, _objectSpread({}, modalProps.on || modalProps), {\n            ok: function ok() {\n              that.handleOk();\n            },\n            cancel: function cancel() {\n              that.handleClose();\n            }\n          })\n        });\n        var componentModel = componentProps && componentProps.model;\n        if (componentModel) {\n          delete componentProps.model;\n        }\n        var ComponentProps = Object.assign({}, componentModel && {\n          model: componentModel\n        } || {}, {\n          ref: '_component',\n          attrs: Object.assign({}, _objectSpread({}, componentProps && componentProps.attrs || componentProps)),\n          on: Object.assign({}, _objectSpread({}, componentProps && componentProps.on || componentProps))\n        });\n        return h(Modal, ModalProps, [h(component, ComponentProps)]);\n      }\n    }).$mount(dialogDiv);\n  }\n  Object.defineProperty(Vue.prototype, '$dialog', {\n    get: function get() {\n      return function () {\n        dialog.apply(this, arguments);\n      };\n    }\n  });\n});","map":{"version":3,"names":["Modal","Vue","dialog","component","componentProps","modalProps","_vm","_isVue","dialogDiv","document","querySelector","createElement","setAttribute","body","appendChild","handle","checkFunction","afterHandel","Function","res","Promise","then","c","dialogInstance","data","visible","router","$router","store","$store","mounted","$on","v","handleClose","methods","$refs","_component","onCancel","$emit","$destroy","handleOk","onOK","onOk","render","h","that","modalModel","model","ModalProps","Object","assign","attrs","on","ok","cancel","componentModel","ComponentProps","ref","$mount","defineProperty","prototype","get","apply","arguments"],"sources":["/home/cg/public/h1emu-boot-vue/src/components/Dialog.js"],"sourcesContent":["import Modal from 'ant-design-vue/es/modal'\nexport default (Vue) => {\n  function dialog (component, componentProps, modalProps) {\n    const _vm = this\n    modalProps = modalProps || {}\n    if (!_vm || !_vm._isVue) {\n      return\n    }\n    let dialogDiv = document.querySelector('body>div[type=dialog]')\n    if (!dialogDiv) {\n      dialogDiv = document.createElement('div')\n      dialogDiv.setAttribute('type', 'dialog')\n      document.body.appendChild(dialogDiv)\n    }\n\n    const handle = function (checkFunction, afterHandel) {\n      if (checkFunction instanceof Function) {\n        const res = checkFunction()\n        if (res instanceof Promise) {\n          res.then(c => {\n            c && afterHandel()\n          })\n        } else {\n          res && afterHandel()\n        }\n      } else {\n        // checkFunction && afterHandel()\n        checkFunction || afterHandel()\n      }\n    }\n\n    const dialogInstance = new Vue({\n      data () {\n        return {\n          visible: true\n        }\n      },\n      router: _vm.$router,\n      store: _vm.$store,\n      mounted () {\n        this.$on('close', (v) => {\n          this.handleClose()\n        })\n      },\n      methods: {\n        handleClose () {\n          handle(this.$refs._component.onCancel, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('cancel')\n            dialogInstance.$destroy()\n          })\n        },\n        handleOk () {\n          handle(this.$refs._component.onOK || this.$refs._component.onOk, () => {\n            this.visible = false\n            this.$refs._component.$emit('close')\n            this.$refs._component.$emit('ok')\n            dialogInstance.$destroy()\n          })\n        }\n      },\n      render: function (h) {\n        const that = this\n        const modalModel = modalProps && modalProps.model\n        if (modalModel) {\n          delete modalProps.model\n        }\n        const ModalProps = Object.assign({}, modalModel && { model: modalModel } || {}, {\n          attrs: Object.assign({}, {\n            ...(modalProps.attrs || modalProps)\n          }, {\n            visible: this.visible\n          }),\n          on: Object.assign({}, {\n            ...(modalProps.on || modalProps)\n          }, {\n            ok: () => {\n              that.handleOk()\n            },\n            cancel: () => {\n              that.handleClose()\n            }\n          })\n        })\n\n        const componentModel = componentProps && componentProps.model\n        if (componentModel) {\n          delete componentProps.model\n        }\n        const ComponentProps = Object.assign({}, componentModel && { model: componentModel } || {}, {\n          ref: '_component',\n          attrs: Object.assign({}, {\n            ...((componentProps && componentProps.attrs) || componentProps)\n          }),\n          on: Object.assign({}, {\n            ...((componentProps && componentProps.on) || componentProps)\n          })\n        })\n\n        return h(Modal, ModalProps, [h(component, ComponentProps)])\n      }\n    }).$mount(dialogDiv)\n  }\n\n  Object.defineProperty(Vue.prototype, '$dialog', {\n    get: () => {\n      return function () {\n        dialog.apply(this, arguments)\n      }\n    }\n  })\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,yBAAyB;AAC3C,gBAAe,UAACC,GAAG,EAAK;EACtB,SAASC,MAAM,CAAEC,SAAS,EAAEC,cAAc,EAAEC,UAAU,EAAE;IACtD,IAAMC,GAAG,GAAG,IAAI;IAChBD,UAAU,GAAGA,UAAU,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACC,GAAG,IAAI,CAACA,GAAG,CAACC,MAAM,EAAE;MACvB;IACF;IACA,IAAIC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,uBAAuB,CAAC;IAC/D,IAAI,CAACF,SAAS,EAAE;MACdA,SAAS,GAAGC,QAAQ,CAACE,aAAa,CAAC,KAAK,CAAC;MACzCH,SAAS,CAACI,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;MACxCH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,SAAS,CAAC;IACtC;IAEA,IAAMO,MAAM,GAAG,SAATA,MAAM,CAAaC,aAAa,EAAEC,WAAW,EAAE;MACnD,IAAID,aAAa,YAAYE,QAAQ,EAAE;QACrC,IAAMC,GAAG,GAAGH,aAAa,EAAE;QAC3B,IAAIG,GAAG,YAAYC,OAAO,EAAE;UAC1BD,GAAG,CAACE,IAAI,CAAC,UAAAC,CAAC,EAAI;YACZA,CAAC,IAAIL,WAAW,EAAE;UACpB,CAAC,CAAC;QACJ,CAAC,MAAM;UACLE,GAAG,IAAIF,WAAW,EAAE;QACtB;MACF,CAAC,MAAM;QACL;QACAD,aAAa,IAAIC,WAAW,EAAE;MAChC;IACF,CAAC;IAED,IAAMM,cAAc,GAAG,IAAItB,GAAG,CAAC;MAC7BuB,IAAI,kBAAI;QACN,OAAO;UACLC,OAAO,EAAE;QACX,CAAC;MACH,CAAC;MACDC,MAAM,EAAEpB,GAAG,CAACqB,OAAO;MACnBC,KAAK,EAAEtB,GAAG,CAACuB,MAAM;MACjBC,OAAO,qBAAI;QAAA;QACT,IAAI,CAACC,GAAG,CAAC,OAAO,EAAE,UAACC,CAAC,EAAK;UACvB,KAAI,CAACC,WAAW,EAAE;QACpB,CAAC,CAAC;MACJ,CAAC;MACDC,OAAO,EAAE;QACPD,WAAW,yBAAI;UAAA;UACblB,MAAM,CAAC,IAAI,CAACoB,KAAK,CAACC,UAAU,CAACC,QAAQ,EAAE,YAAM;YAC3C,MAAI,CAACZ,OAAO,GAAG,KAAK;YACpB,MAAI,CAACU,KAAK,CAACC,UAAU,CAACE,KAAK,CAAC,OAAO,CAAC;YACpC,MAAI,CAACH,KAAK,CAACC,UAAU,CAACE,KAAK,CAAC,QAAQ,CAAC;YACrCf,cAAc,CAACgB,QAAQ,EAAE;UAC3B,CAAC,CAAC;QACJ,CAAC;QACDC,QAAQ,sBAAI;UAAA;UACVzB,MAAM,CAAC,IAAI,CAACoB,KAAK,CAACC,UAAU,CAACK,IAAI,IAAI,IAAI,CAACN,KAAK,CAACC,UAAU,CAACM,IAAI,EAAE,YAAM;YACrE,MAAI,CAACjB,OAAO,GAAG,KAAK;YACpB,MAAI,CAACU,KAAK,CAACC,UAAU,CAACE,KAAK,CAAC,OAAO,CAAC;YACpC,MAAI,CAACH,KAAK,CAACC,UAAU,CAACE,KAAK,CAAC,IAAI,CAAC;YACjCf,cAAc,CAACgB,QAAQ,EAAE;UAC3B,CAAC,CAAC;QACJ;MACF,CAAC;MACDI,MAAM,EAAE,gBAAUC,CAAC,EAAE;QACnB,IAAMC,IAAI,GAAG,IAAI;QACjB,IAAMC,UAAU,GAAGzC,UAAU,IAAIA,UAAU,CAAC0C,KAAK;QACjD,IAAID,UAAU,EAAE;UACd,OAAOzC,UAAU,CAAC0C,KAAK;QACzB;QACA,IAAMC,UAAU,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEJ,UAAU,IAAI;UAAEC,KAAK,EAAED;QAAW,CAAC,IAAI,CAAC,CAAC,EAAE;UAC9EK,KAAK,EAAEF,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,oBACjB7C,UAAU,CAAC8C,KAAK,IAAI9C,UAAU,GACjC;YACDoB,OAAO,EAAE,IAAI,CAACA;UAChB,CAAC,CAAC;UACF2B,EAAE,EAAEH,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,oBACd7C,UAAU,CAAC+C,EAAE,IAAI/C,UAAU,GAC9B;YACDgD,EAAE,EAAE,cAAM;cACRR,IAAI,CAACL,QAAQ,EAAE;YACjB,CAAC;YACDc,MAAM,EAAE,kBAAM;cACZT,IAAI,CAACZ,WAAW,EAAE;YACpB;UACF,CAAC;QACH,CAAC,CAAC;QAEF,IAAMsB,cAAc,GAAGnD,cAAc,IAAIA,cAAc,CAAC2C,KAAK;QAC7D,IAAIQ,cAAc,EAAE;UAClB,OAAOnD,cAAc,CAAC2C,KAAK;QAC7B;QACA,IAAMS,cAAc,GAAGP,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEK,cAAc,IAAI;UAAER,KAAK,EAAEQ;QAAe,CAAC,IAAI,CAAC,CAAC,EAAE;UAC1FE,GAAG,EAAE,YAAY;UACjBN,KAAK,EAAEF,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,oBAChB9C,cAAc,IAAIA,cAAc,CAAC+C,KAAK,IAAK/C,cAAc,EAC9D;UACFgD,EAAE,EAAEH,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,oBACb9C,cAAc,IAAIA,cAAc,CAACgD,EAAE,IAAKhD,cAAc;QAE/D,CAAC,CAAC;QAEF,OAAOwC,CAAC,CAAC5C,KAAK,EAAEgD,UAAU,EAAE,CAACJ,CAAC,CAACzC,SAAS,EAAEqD,cAAc,CAAC,CAAC,CAAC;MAC7D;IACF,CAAC,CAAC,CAACE,MAAM,CAAClD,SAAS,CAAC;EACtB;EAEAyC,MAAM,CAACU,cAAc,CAAC1D,GAAG,CAAC2D,SAAS,EAAE,SAAS,EAAE;IAC9CC,GAAG,EAAE,eAAM;MACT,OAAO,YAAY;QACjB3D,MAAM,CAAC4D,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;MAC/B,CAAC;IACH;EACF,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}